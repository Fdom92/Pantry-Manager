<ion-content [fullscreen]="true" class="setup">
  <div class="background-blur blur-a"></div>
  <div class="background-blur blur-b"></div>

  <div class="top-bar">
    <div class="eyebrow">
      <ion-icon name="sparkles-outline"></ion-icon>
      <span>{{ 'setup.tagline' | translate }}</span>
    </div>
    <div class="step-indicator">
      {{ facade.currentStepIndicator() }}
    </div>
  </div>

  <div class="setup-card">
    <div class="icon-burst">
      <div class="glow"></div>
      <ion-icon [name]="facade.currentStep().icon"></ion-icon>
    </div>
    <h1>
      {{ facade.currentStep().titleKey | translate }}
    </h1>
    <p>
      {{ facade.currentStep().descriptionKey | translate }}
    </p>

    <div class="chip-grid">
      @for (option of facade.currentOptions(); track option.id) {
        <ion-chip
          [class.is-selected]="option.selected"
          (click)="toggleOption(option.id)">
          <ion-label>{{ option.label }}</ion-label>
        </ion-chip>
      }
    </div>
    @if (facade.currentStep().key === 'locations') {
      <p class="selection-hint">{{ 'setup.validation.locationsOptional' | translate }}</p>
    } @else if (facade.currentStep().key === 'categories') {
      <p class="selection-hint">{{ 'setup.validation.categoriesOptional' | translate }}</p>
    }
  </div>

  <div class="actions">
    <ion-button
      fill="clear"
      (click)="skipStep()">
      {{ 'setup.actions.skip' | translate }}
    </ion-button>
    <ion-button
      color="primary"
      shape="round"
      (click)="continueStep()">
      {{ facade.primaryActionLabelKey() | translate }}
    </ion-button>
  </div>
</ion-content>
