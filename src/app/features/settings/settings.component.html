<ion-header>
  <ion-toolbar>
    <ion-title>{{ "settings.title" | translate }}</ion-title>
  </ion-toolbar>
</ion-header>

<ion-content class="ion-padding">
  <div class="settings-content">
    <ion-card class="settings-card">
      <ion-card-header>
        <ion-card-title>{{
          "settings.appearance.title" | translate
        }}</ion-card-title>
        <ion-card-subtitle>{{
          "settings.appearance.subtitle" | translate
        }}</ion-card-subtitle>
      </ion-card-header>
      <ion-card-content>
        <ion-list lines="none">
          <ion-item lines="none" class="theme-item">
            <ion-label>
              <h3>{{ "settings.appearance.theme" | translate }}</h3>
              <p>{{ "settings.appearance.description" | translate }}</p>
            </ion-label>
          </ion-item>
          <div class="theme-grid" aria-label="{{ 'settings.appearance.theme' | translate }}">
            <button
              type="button"
              class="theme-option"
              [class.selected]="facade.themePreference() === 'light'"
              [attr.aria-pressed]="facade.themePreference() === 'light'"
              [disabled]="facade.isUpdatingTheme()"
              (click)="facade.updateThemePreference('light')"
            >
              <ion-icon name="sunny-outline"></ion-icon>
              <span>{{ "settings.appearance.light" | translate }}</span>
            </button>
            <button
              type="button"
              class="theme-option"
              [class.selected]="facade.themePreference() === 'dark'"
              [attr.aria-pressed]="facade.themePreference() === 'dark'"
              [disabled]="facade.isUpdatingTheme()"
              (click)="facade.updateThemePreference('dark')"
            >
              <ion-icon name="moon-outline"></ion-icon>
              <span>{{ "settings.appearance.dark" | translate }}</span>
            </button>
            <button
              type="button"
              class="theme-option"
              [class.selected]="facade.themePreference() === 'system'"
              [attr.aria-pressed]="facade.themePreference() === 'system'"
              [disabled]="facade.isUpdatingTheme()"
              (click)="facade.updateThemePreference('system')"
            >
              <ion-icon name="desktop-outline"></ion-icon>
              <span>{{ "settings.appearance.system" | translate }}</span>
            </button>
          </div>
        </ion-list>
      </ion-card-content>
    </ion-card>
    @if (isPro) {
      <ion-card class="settings-card">
        <ion-card-header>
          <ion-card-title>{{ "settings.ai.title" | translate }}</ion-card-title>
          <ion-card-subtitle>{{ "settings.ai.subtitle" | translate }}</ion-card-subtitle>
        </ion-card-header>
        <ion-card-content>
          <ion-list lines="none">
            <ion-item
              lines="none"
              button
              detail="true"
              routerLink="/settings/ai"
            >
              <ion-label>
                <h3>{{ "settings.ai.contextTitle" | translate }}</h3>
                <p>{{ "settings.ai.contextDescription" | translate }}</p>
              </ion-label>
            </ion-item>
          </ion-list>
        </ion-card-content>
      </ion-card>
    }

    <ion-card class="settings-card">
      <ion-card-header>
        <ion-card-title>{{ "settings.advanced.title" | translate }}</ion-card-title>
        <ion-card-subtitle>{{ "settings.advanced.subtitle" | translate }}</ion-card-subtitle>
      </ion-card-header>
      <ion-card-content>
        <ion-list lines="none">
          <ion-item
            lines="none"
            button
            detail="true"
            routerLink="/settings/avanzado"
          >
            <ion-label>
              <h3>{{ "settings.advanced.openTitle" | translate }}</h3>
              <p>{{ "settings.advanced.openSubtitle" | translate }}</p>
            </ion-label>
          </ion-item>
        </ion-list>
      </ion-card-content>
    </ion-card>

    @if (isDev) {
    <ion-card class="settings-card">
      <ion-card-header>
        <ion-card-title>{{ "settings.dev.title" | translate }}</ion-card-title>
        <ion-card-subtitle>{{ "settings.dev.subtitle" | translate }}</ion-card-subtitle>
      </ion-card-header>
      <ion-card-content>
        <ion-list lines="none">
          <ion-item
            lines="none"
            button
            detail="true"
            routerLink="/onboarding"
          >
            <ion-label>
              <h3>{{ "settings.tutorial.title" | translate }}</h3>
              <p>{{ "settings.tutorial.subtitle" | translate }}</p>
            </ion-label>
          </ion-item>
        </ion-list>
      </ion-card-content>
    </ion-card>
    }

    <ion-card class="settings-card">
      <ion-card-header>
        <ion-card-title>{{ "settings.info.title" | translate }}</ion-card-title>
        <ion-card-subtitle>{{
          "settings.info.subtitle" | translate
        }}</ion-card-subtitle>
      </ion-card-header>
      <ion-card-content>
        <ion-list lines="none">
          <ion-item lines="none">
            <ion-label>
              <h3>{{ "settings.info.feedbackTitle" | translate }}</h3>
              <p>{{ "settings.info.feedbackSubtitle" | translate }}</p>
            </ion-label>
            <ion-button
              slot="end"
              fill="clear"
              color="primary"
              [attr.aria-label]="'settings.info.feedbackAction' | translate"
              href="mailto:fer.olmo92@gmail.com?subject=Feedback%20PantryMind"
            >
              <ion-icon name="paper-plane-outline"></ion-icon>
            </ion-button>
          </ion-item>

          <ion-item lines="none">
            <ion-label>
              <h3>{{ "settings.info.version" | translate }}</h3>
              <p>{{ appVersion }}</p>
            </ion-label>
          </ion-item>
        </ion-list>
      </ion-card-content>
    </ion-card>
  </div>
</ion-content>
