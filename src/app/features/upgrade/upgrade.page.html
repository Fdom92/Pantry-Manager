<ion-header>
  <ion-toolbar>
    <ion-buttons slot="start">
      <ion-back-button defaultHref="/dashboard"></ion-back-button>
    </ion-buttons>
    <ion-title>{{ 'upgrade.title' | translate }}</ion-title>
  </ion-toolbar>
</ion-header>

<ion-content class="ion-padding">
  <div class="upgrade-hero">
    <div class="pro-badge">PRO</div>
    <h1>{{ 'upgrade.headline' | translate }}</h1>
    <p>{{ 'upgrade.subtitle' | translate }}</p>
    <div class="hero-actions">
      <ion-button fill="clear" color="primary" (click)="facade.skipUpgradeFlow()">
        {{ 'upgrade.actions.maybeLater' | translate }}
      </ion-button>
    </div>
  </div>

  <div class="plans-section">
    <div class="plans-grid">
      @if (facade.planOptions().length) {
        @for (plan of facade.planOptions(); track plan.id) {
          <app-plan-card
            [title]="plan.title"
            [subtitle]="plan.subtitle"
            [price]="plan.price"
            [period]="plan.period"
            [benefits]="plan.benefits"
            [savings]="plan.savings"
            [trialLabel]="plan.trialLabel"
            [ctaLabel]="plan.ctaLabel"
            [badge]="plan.badge"
            [highlight]="plan.highlight"
            [disabled]="!!facade.activePurchaseId() || facade.isLoadingPlans()"
            (selectPlan)="facade.handleSelectPlan(plan)">
          </app-plan-card>
        }
      } @else {
        <ion-note>{{ 'upgrade.plans.unavailable' | translate }}</ion-note>
      }
    </div>
  </div>

  <div class="cta-block">
    <ion-button expand="block" fill="outline" color="secondary" (click)="facade.restorePurchases()">
      {{ 'upgrade.actions.restore' | translate }}
    </ion-button>
    <ion-note>
      {{ 'upgrade.note' | translate }}
    </ion-note>
    @if (facade.isPro$ | async) {
      <ion-badge color="success">{{ 'upgrade.alreadyPro' | translate }}</ion-badge>
    }
  </div>
</ion-content>
